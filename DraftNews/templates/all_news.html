{% extends 'flatpages/default.html' %}
{% load custom_filters %}
{% load custom_tags %}
{% load custom_extras %}
{% load i18n %}

{% block title %}
üî•{% trans "All Posts" %}
{% endblock title %}


{% block content %}
   <h1 style="text-align: center;">{% trans "All news and articles" %}</h1>
    <p style="text-align: center;">{% trans "Amount" %}: {{ news|length }}</p>

{% if not is_author %}
<button>
    <a class="nav-link" href="{% url 'account_upgrade' %}">
        <h4><strong>{% trans "Join the authors!" %}</strong></h4>
    </a>
</button>
{% endif %}


   <hr>

{% if news %}


           {% for news in news %}

               <p><strong>{% trans "Title" %}: </strong><a href="{% url 'exactly_news' news.id %}">{{ news.post_title|censor }}</a></p>

               <p><strong>{% trans "Content" %}: </strong>{{ news.post_body|truncatechars:240|censor }}</p>
               <strong>{% trans "Author" %}: </strong>{{ news.author.user }}
               <strong>üïó</strong>{{ news.post_datetime|date:'d M' }}
            <strong>{% trans "Topic" %}</strong>
    {% for cat in news.categories.all %}
                        <a href="{% url 'category_list' cat.id %}">{{ cat.category }}</a>


    {% endfor %}

               <p></p>

{#{% if perms.newsportal.change_post or perms.newsportal.delete_post %}#}
{#                <strong>–î–µ–π—Å—Ç–≤–∏—è</strong>#}
{##}
{#{% endif %}#}
 {# –ê –∑–¥–µ—Å—å –¥–æ—Å—Ç—É–ø –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Å—ã–ª–∫–∏ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ #}

                    {% if perms.newsportal.change_post %}
                        {% if news.post_type == "NEWS" %}
                            <button>
                            <a href="{% url 'news_update' pk=news.pk %}">{% trans "Edit" %}</a>
                            </button>
                        {% elif news.post_type == "ARTL" %}
                            <button>
                            <a href="{% url 'artl_update' pk=news.pk %}">{% trans "Edit" %}</a>
                            </button>
                        {% endif %}
                    {% endif %}

                    {% if perms.newsportal.delete_post %}
                    {% if news.post_type == "NEWS" %}
                            <button>
                            <a href="{% url 'news_delete' pk=news.pk %}">{% trans "Delete" %}</a>
                            </button>
                        {% elif news.post_type == "ARTL" %}
                        <button>
                            <a href="{% url 'artl_delete' pk=news.pk %}">{% trans "Delete" %}</a>
                        </button>
                        {% endif %}
                    {% endif %}


<hr /> {#–ª–∏–Ω–∏—è –æ—Ç–±–∏–≤–∫–∏#}
           {% endfor %}

<p style="text-align: center;">
<br> <strong><a href="{% url 'news_search' %}">üëÄ{% trans "Search" %}</a> </strong><br>
   {% else %}
       <h2>{% trans "No posts!" %}</h2>
   {% endif %}
</p>
{# –î–æ–±–∞–≤–ª—è–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É #}
   {# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö #}
<p style="text-align: center;">
{% if page_obj.has_previous %}
    <a href="? url_replace page=1">1</a>
    {% if page_obj.previous_page_number != 1 %}
        ...
        <a href="?{% url_replace page=page_obj.previous_page_number %}">{{ page_obj.previous_page_number }}</a>
    {% endif %}
{% endif %}

{# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ #}
{{ page_obj.number }}

{# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö #}
{% if page_obj.has_next %}
       <a href="?{% url_replace page=page_obj.next_page_number %}">{{ page_obj.next_page_number }}</a>
       {% if paginator.num_pages != page_obj.next_page_number %}
           ...
           <a href="?{% url_replace page=page_obj.paginator.num_pages %}">{{ page_obj.paginator.num_pages }}</a>
       {% endif %}
   {% endif %}
</p>

{% endblock content %}