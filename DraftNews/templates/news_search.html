{% extends 'flatpages/default.html' %}
{% load custom_filters %}
{% load custom_tags %}


{% block title %}
üëÄSearch
{% endblock title %}



{% block content %}

<h1 style="text-align: center;">–ü–æ–∏—Å–∫</h1>
<hr>

<table style="margin-left: auto; margin-right: auto;">
  <tr>
    <td><form action="" method="get">
       {# –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä—É—é –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç, –º–æ–∂–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–º —Ñ–æ—Ä–º—É —Å –ø–æ–ª—è–º–∏ #}
       <p style="text-align: center;">{{ filterset.form.as_p }}</p>
       {# –î–æ–±–∞–≤–∏–º –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã #}

    <table style="margin-left: auto; margin-right: auto;">
            <tr>
                <td>
                    <input type="submit" value="–ù–∞–π—Ç–∏" />
                </td>
            </tr>
    </table>


        </form>
    </td>
  </tr>
</table>

   <hr>
   {% if news_search %}

           {% for news in news_search %}

               <p><strong>–ù–∞–∑–≤–∞–Ω–∏–µ: </strong><a href="{% url 'exactly_news' news.id %}">{{ news.post_title|censor }}</a></p>

               <p><strong>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: </strong>{{ news.post_body|truncatechars:240|censor }}</p>
               <strong>–ê–≤—Ç–æ—Ä: </strong>{{ news.author.user }}
               <strong>–î–∞—Ç–∞: </strong>{{ news.post_datetime|date:'d M' }}
            <strong>–¢–µ–º–∞</strong>
    {% for cat in news.categories.all %}
                        <a href="{% url 'category_list' cat.id %}">{{ cat.category }}</a>


    {% endfor %}
               <p></p>
<hr /> {#–ª–∏–Ω–∏—è –æ—Ç–±–∏–≤–∫–∏#}
           {% endfor %}

       </table>
   {% else %}
       <h2>–ü–æ—Å—Ç–æ–≤ –Ω–µ—Ç!</h2>
   {% endif %}
</p>
{# –î–æ–±–∞–≤–ª—è–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É #}
   {# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö #}

<p style="text-align: center;">
{% if page_obj.has_previous %}
    <a href="? url_replace page=1">1</a>
    {% if page_obj.previous_page_number != 1 %}
        ...
        <a href="?{% url_replace page=page_obj.previous_page_number %}">{{ page_obj.previous_page_number }}</a>
    {% endif %}
{% endif %}

{# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ #}
{{ page_obj.number }}

{# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö #}
{% if page_obj.has_next %}
       <a href="?{% url_replace page=page_obj.next_page_number %}">{{ page_obj.next_page_number }}</a>
       {% if paginator.num_pages != page_obj.next_page_number %}
           ...
           <a href="?{% url_replace page=page_obj.paginator.num_pages %}">{{ page_obj.paginator.num_pages }}</a>
       {% endif %}
   {% endif %}
</p>

{% endblock content %}