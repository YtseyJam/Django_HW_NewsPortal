{% extends 'flatpages/default.html' %}

{% load custom_filters %}
{% load custom_tags %}

{% block title %}
{{ category }}
{% endblock title %}


{% block content %}
   <h1 style="text-align: center;">–í—Å–µ –ø–æ—Å—Ç—ã –ø–æ —Ç–µ–º–µ "{{ category }}"</h1>
    <p style="text-align: center;">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤: {{ category_news_list|length }}</p>

    {% if is_not_subscriber %}
        <p class="text-center"><a href="{% url 'subscribe' category.id%}" class="btn btn-secondary btn-sm"> üëâ–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ç–µ–º—É "{{ category }}"</a>  </p>
    {% else %}
       <p class = "text-center"><a href = "{% url 'unsubscribe' category.id %}" class = "btn btn-secondary btn-sm"> üö´–û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —Ç–µ–º—ã "{{ category }}" </a></p>
   {% endif %}

  <hr>

<!--{% if category_news_list %}-->

       {% for news in category_news_list %}

               <p><strong>–ù–∞–∑–≤–∞–Ω–∏–µ: </strong><a href="{% url 'exactly_news' news.id %}">{{ news.post_title|censor }}</a></p>

               <p><strong>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: </strong>{{ news.post_body|truncatechars:240|censor }}</p>
               <strong>–ê–≤—Ç–æ—Ä: </strong>{{ news.author.user }}
    <strong>–¢–µ–º–∞</strong>
    {% for cat in news.categories.all %}
                        <a href="{% url 'category_list' cat.id %}">{{ cat.category }}</a>


    {% endfor %}
<hr />
        {% endfor %}

<p style="text-align: center;">
<br> <strong><a href="{% url 'news_search' %}">üëÄ–ü–æ–∏—Å–∫</a> </strong><br>
   {% else %}
       <h2>–ü–æ—Å—Ç–æ–≤ –Ω–µ—Ç!</h2>
   {% endif %}
</p>

{# –î–æ–±–∞–≤–ª—è–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É #}
   {# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö #}
<p style="text-align: center;">
{% if page_obj.has_previous %}
    <a href="? url_replace page=1">1</a>
    {% if page_obj.previous_page_number != 1 %}
        ...
        <a href="?{% url_replace page=page_obj.previous_page_number %}">{{ page_obj.previous_page_number }}</a>
    {% endif %}
{% endif %}

{# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ #}
{{ page_obj.number }}

{# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö #}
{% if page_obj.has_next %}
       <a href="?{% url_replace page=page_obj.next_page_number %}">{{ page_obj.next_page_number }}</a>
       {% if paginator.num_pages != page_obj.next_page_number %}
           ...
           <a href="?{% url_replace page=page_obj.paginator.num_pages %}">{{ page_obj.paginator.num_pages }}</a>
       {% endif %}
   {% endif %}
</p>


{% endblock content %}